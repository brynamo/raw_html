<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
    <!--<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">-->

    <title>Grows</title>
    <meta name="description" content="Ability to add IoT platforms">
    <meta name="author" content="Hydrobase">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <!-- Basic Styles -->
    <link rel="stylesheet" type="text/css" media="screen" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="css/typicons.css">

    <!-- SmartAdmin Styles : Caution! DO NOT change the order -->
    <link rel="stylesheet" type="text/css" media="screen" href="css/smartadmin-production-plugins.min.css">
    <link rel="stylesheet" type="text/css" media="screen" href="css/smartadmin-production.min.css">
    <link rel="stylesheet" type="text/css" media="screen" href="css/smartadmin-skins.min.css">

    <!-- SmartAdmin RTL Support  -->
    <link rel="stylesheet" type="text/css" media="screen" href="css/smartadmin-rtl.min.css">

    <!-- We recommend you use "your_style.css" to override SmartAdmin
         specific styles this will also ensure you retrain your customization with each SmartAdmin update.-->
    <link rel="stylesheet" type="text/css" media="screen" href="css/custom_style.css">
    <link rel="stylesheet" type="text/css" href="css/am_style.css">

    <!-- Demo purpose only: goes with demo.js, you can delete this css when designing your own WebApp
    <link rel="stylesheet" type="text/css" media="screen" href="css/demo.min.css">-->

    <!-- FAVICONS -->
    <link rel="shortcut icon" href="img/favicon/favicon_new.ico" type="image/x-icon">
    <link rel="icon" href="img/favicon/favicon_new.ico" type="image/x-icon">

    <!-- GOOGLE FONT -->
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,300,400,700">

    <!-- Specifying a Webpage Icon for Web Clip
         Ref: https://developer.apple.com/library/ios/documentation/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html -->
    <link rel="apple-touch-icon" href="img/splash/sptouch-icon-iphone.png">
    <link rel="apple-touch-icon" sizes="76x76" href="img/splash/touch-icon-ipad.png">
    <link rel="apple-touch-icon" sizes="120x120" href="img/splash/touch-icon-iphone-retina.png">
    <link rel="apple-touch-icon" sizes="152x152" href="img/splash/touch-icon-ipad-retina.png">

    <!-- iOS web-app metas : hides Safari UI Components and Changes Status Bar Appearance -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">

    <!-- Startup image for web apps -->
    <link rel="apple-touch-startup-image" href="img/splash/ipad-landscape.png" media="screen and (min-device-width: 481px) and (max-device-width: 1024px) and (orientation:landscape)">
    <link rel="apple-touch-startup-image" href="img/splash/ipad-portrait.png" media="screen and (min-device-width: 481px) and (max-device-width: 1024px) and (orientation:portrait)">
    <link rel="apple-touch-startup-image" href="img/splash/iphone.png" media="screen and (max-device-width: 320px)">



    <!-- amCharts -->
    <script src="js/amcharts/amcharts.js" type="text/javascript"></script>
    <script src="js/amcharts/serial.js" type="text/javascript"></script>

    <script>
        //Create Variables for other functions
        //var chart;
        //var graph;

        var pHchartData = [];
        var ecChartData = [];
        var luxChartData = [];
        var waterTempData = [];
        var airTempData = [];
        var humidityData = [];

        //Random Value Generator Function
        function get_rando_value (min, max){
            return Math.random() * (max - min) + min;
        }

        //Functions For Creating Random Data Arrays
        function fill_phData (){
            var temp_hour = 0;
            var temp_min = 0;
            var temp_value = 0;
            for (i = 0; i < 95; i++){
                if (temp_min == 0 || temp_min == 15 || temp_min == 30){
                    temp_min += 15;
                } else if (temp_min == 45) {
                    temp_min = 0;
                    temp_hour += 1;
                }
                if (temp_hour < 10){
                    var hour = " 0" + temp_hour;
                }
                else {
                    var hour = " " + temp_hour;
                }
                if (temp_min == 0){
                    var min = ":0" + temp_min;
                }
                else {
                    var min = ":" + temp_min;
                }
                temp_value += 1;

                pHchartData.push(
                        {
                            "date": new Date('March 15, 2016'+ hour + min + ':00'),
                            "value": get_rando_value(1, 14)
                        }
                );
            }
        }
        function fill_ecData (){
            var temp_hour = 0;
            var temp_min = 0;
            var temp_value = 0;
            for (i = 0; i < 95; i++){
                if (temp_min == 0 || temp_min == 15 || temp_min == 30){
                    temp_min += 15;
                } else if (temp_min == 45) {
                    temp_min = 0;
                    temp_hour += 1;
                }
                if (temp_hour < 10){
                    var hour = " 0" + temp_hour;
                }
                else {
                    var hour = " " + temp_hour;
                }
                if (temp_min == 0){
                    var min = ":0" + temp_min;
                }
                else {
                    var min = ":" + temp_min;
                }
                temp_value += 1;

                ecChartData.push(
                        {
                            "date": new Date('March 15, 2016'+ hour + min + ':00'),
                            "ec_value": get_rando_value(0, 1500),
                            "tds": get_rando_value(0, 800),
                            "ps": get_rando_value(0,1)

                        }
                );
            }
        }
        function fill_luxData (){
            var temp_hour = 0;
            var temp_min = 0;
            var temp_value = 0;
            for (i = 0; i < 95; i++){
                if (temp_min == 0 || temp_min == 15 || temp_min == 30){
                    temp_min += 15;
                } else if (temp_min == 45) {
                    temp_min = 0;
                    temp_hour += 1;
                }
                if (temp_hour < 10){
                    var hour = " 0" + temp_hour;
                }
                else {
                    var hour = " " + temp_hour;
                }
                if (temp_min == 0){
                    var min = ":0" + temp_min;
                }
                else {
                    var min = ":" + temp_min;
                }
                temp_value += 1;

                luxChartData.push(
                        {
                            "date": new Date('March 15, 2016'+ hour + min + ':00'),
                            "value": get_rando_value(0, 1500)
                        }
                );
            }
        }
        function fill_waterTempData (){
            var temp_hour = 0;
            var temp_min = 0;
            var temp_value = 0;
            for (i = 0; i < 95; i++){
                if (temp_min == 0 || temp_min == 15 || temp_min == 30){
                    temp_min += 15;
                } else if (temp_min == 45) {
                    temp_min = 0;
                    temp_hour += 1;
                }
                if (temp_hour < 10){
                    var hour = " 0" + temp_hour;
                }
                else {
                    var hour = " " + temp_hour;
                }
                if (temp_min == 0){
                    var min = ":0" + temp_min;
                }
                else {
                    var min = ":" + temp_min;
                }
                temp_value += 1;

                waterTempData.push(
                        {
                            "date": new Date('March 15, 2016'+ hour + min + ':00'),
                            "value": get_rando_value(32, 100)
                        }
                );
            }
        }
        function fill_airTempData (){
            var temp_hour = 0;
            var temp_min = 0;
            var temp_value = 0;
            for (i = 0; i < 95; i++){
                if (temp_min == 0 || temp_min == 15 || temp_min == 30){
                    temp_min += 15;
                } else if (temp_min == 45) {
                    temp_min = 0;
                    temp_hour += 1;
                }
                if (temp_hour < 10){
                    var hour = " 0" + temp_hour;
                }
                else {
                    var hour = " " + temp_hour;
                }
                if (temp_min == 0){
                    var min = ":0" + temp_min;
                }
                else {
                    var min = ":" + temp_min;
                }
                temp_value += 1;

                airTempData.push(
                        {
                            "date": new Date('March 15, 2016'+ hour + min + ':00'),
                            "value": get_rando_value(32, 100)
                        }
                );
            }
        }
        function fill_humidityData (){
            var temp_hour = 0;
            var temp_min = 0;
            var temp_value = 0;
            for (i = 0; i < 95; i++){
                if (temp_min == 0 || temp_min == 15 || temp_min == 30){
                    temp_min += 15;
                } else if (temp_min == 45) {
                    temp_min = 0;
                    temp_hour += 1;
                }
                if (temp_hour < 10){
                    var hour = " 0" + temp_hour;
                }
                else {
                    var hour = " " + temp_hour;
                }
                if (temp_min == 0){
                    var min = ":0" + temp_min;
                }
                else {
                    var min = ":" + temp_min;
                }
                temp_value += 1;

                humidityData.push(
                        {
                            "date": new Date('March 15, 2016'+ hour + min + ':00'),
                            "value": get_rando_value(0, 100)
                        }
                );
            }
        }

        //Create Random Data
        fill_phData();
        fill_ecData();
        fill_luxData();
        fill_waterTempData();
        fill_airTempData();
        fill_humidityData();

        //Create pH Graph
        AmCharts.ready(function () {
            // SERIAL CHART
            var ph_chart = new AmCharts.AmSerialChart();

            ph_chart.dataProvider = pHchartData;
            ph_chart.marginLeft = 10;
            ph_chart.categoryField = "date";

            // listen for "dataUpdated" event (fired when chart is inited) and call zoomChart method when it happens
            ph_chart.addListener("dataUpdated", zoomChart);
            function zoomChart() {
                // different zoom methods can be used - zoomToIndexes, zoomToDates, zoomToCategoryValues
                //ph_chart.zoomToDates(new Date(1972, 0), new Date(1984, 0));
                ph_chart.zoomToIndexes(0,30);
            }

            // AXES
            // category
            var categoryAxis = ph_chart.categoryAxis;
            categoryAxis.parseDates = true; // as our data is date-based, we set parseDates to true
            categoryAxis.minPeriod = "mm"; // our data is yearly, so we set minPeriod to YYYY
            categoryAxis.dashLength = 3;
            categoryAxis.minorGridEnabled = true;
            categoryAxis.minorGridAlpha = 0.1;
            //categoryAxis.offset = 83;

            // value
            var valueAxis = new AmCharts.ValueAxis();
            valueAxis.axisAlpha = 0;
            valueAxis.inside = true;
            valueAxis.dashLength = 3;
            valueAxis.labelOffset = -30;
            ph_chart.addValueAxis(valueAxis);

            // GRAPH
            var ph_graph = new AmCharts.AmGraph();
            ph_graph.type = "smoothedLine"; // this line makes the graph smoothed line.
            ph_graph.lineColor = "#FF9E3A";
            ph_graph.negativeBase = "6.5";
            ph_graph.negativeLineColor = "#41A6A8"; // this line makes the graph to change color when it drops below 0
            ph_graph.bullet = "round";
            ph_graph.bulletSize = 8;
            ph_graph.bulletBorderColor = "#FFFFFF";
            ph_graph.bulletBorderAlpha = 1;
            ph_graph.bulletBorderThickness = 2;
            ph_graph.lineThickness = 2;
            ph_graph.valueField = "value";
            ph_graph.selectedBackgroundColor = "#FFF";
            ph_graph.balloonText = "[[category]]<br><b><span style='font-size:14px;'>[[value]]</span></b>";
            ph_chart.addGraph(ph_graph);

            // CURSOR
            var chartCursor = new AmCharts.ChartCursor();
            chartCursor.cursorAlpha = 0;
            chartCursor.cursorPosition = "mouse";
            chartCursor.categoryBalloonDateFormat = "DD MMM YYYY, @HH:NN";
            chartCursor.cursorColor = "#47DBB7";
            ph_chart.addChartCursor(chartCursor);

            // SCROLLBAR
            var chartScrollbar = new AmCharts.ChartScrollbar();
            ph_chart.addChartScrollbar(chartScrollbar);

            // WRITE
            ph_chart.write("pH_chartDiv");
        });

        //Create EC Graph
        AmCharts.ready(function () {
            // SERIAL CHART
            var ec_chart = new AmCharts.AmSerialChart();

            ec_chart.dataProvider = ecChartData;
            ec_chart.marginLeft = 10;
            ec_chart.categoryField = "date";

            // listen for "dataUpdated" event (fired when chart is inited) and call zoomChart method when it happens
            ec_chart.addListener("dataUpdated", zoomChart);
            function zoomChart() {
                // different zoom methods can be used - zoomToIndexes, zoomToDates, zoomToCategoryValues
                //ph_chart.zoomToDates(new Date(1972, 0), new Date(1984, 0));
                ec_chart.zoomToIndexes(0,30);
            }
            // AXES
            // category
            var categoryAxis = ec_chart.categoryAxis;
            categoryAxis.parseDates = true; // as our data is date-based, we set parseDates to true
            categoryAxis.minPeriod = "mm"; // our data is yearly, so we set minPeriod to YYYY
            categoryAxis.dashLength = 3;
            categoryAxis.minorGridEnabled = true;
            categoryAxis.minorGridAlpha = 0.1;
            //categoryAxis.offset = 83;

            // value
            var valueAxis = new AmCharts.ValueAxis();
            valueAxis.axisAlpha = 0;
            valueAxis.inside = true;
            valueAxis.dashLength = 3;
            valueAxis.labelOffset = -30;
            ec_chart.addValueAxis(valueAxis);

            // GRAPH
            var ec_graph = new AmCharts.AmGraph();
            ec_graph.type = "smoothedLine"; // this line makes the graph smoothed line.
            ec_graph.lineColor = "#FF9E3A";
            ec_graph.negativeBase = "1000";
            ec_graph.negativeLineColor = "#41A6A8"; // this line makes the graph to change color when it drops below 0
            ec_graph.bullet = "round";
            ec_graph.bulletSize = 8;
            ec_graph.bulletBorderColor = "#FFFFFF";
            ec_graph.bulletBorderAlpha = 1;
            ec_graph.bulletBorderThickness = 2;
            ec_graph.lineThickness = 2;
            ec_graph.valueField = "ec_value";
            ec_graph.selectedBackgroundColor = "#FFF";
            ec_graph.balloonText = "[[category]]<br><b><span style='font-size:14px;'>[[value]]</span></b>";
            ec_chart.addGraph(ec_graph);

            // CURSOR
            var chartCursor = new AmCharts.ChartCursor();
            chartCursor.cursorAlpha = 0;
            chartCursor.cursorPosition = "mouse";
            chartCursor.categoryBalloonDateFormat = "DD MMM YYYY, @HH:NN";
            chartCursor.cursorColor = "#47DBB7";
            ec_chart.addChartCursor(chartCursor);

            // SCROLLBAR
            var chartScrollbar = new AmCharts.ChartScrollbar();
            ec_chart.addChartScrollbar(chartScrollbar);

            // WRITE
            ec_chart.write("ec_chartDiv");
        });

        //Create TDS Graph
        AmCharts.ready(function () {
            // SERIAL CHART
            var tds_chart = new AmCharts.AmSerialChart();

            tds_chart.dataProvider = ecChartData;
            tds_chart.marginLeft = 10;
            tds_chart.categoryField = "date";

            // listen for "dataUpdated" event (fired when chart is inited) and call zoomChart method when it happens
            tds_chart.addListener("dataUpdated", zoomChart);
            function zoomChart() {
                // different zoom methods can be used - zoomToIndexes, zoomToDates, zoomToCategoryValues
                //ph_chart.zoomToDates(new Date(1972, 0), new Date(1984, 0));
                tds_chart.zoomToIndexes(0,30);
            }

            // AXES
            // category
            var categoryAxis = tds_chart.categoryAxis;
            categoryAxis.parseDates = true; // as our data is date-based, we set parseDates to true
            categoryAxis.minPeriod = "mm"; // our data is yearly, so we set minPeriod to YYYY
            categoryAxis.dashLength = 3;
            categoryAxis.minorGridEnabled = true;
            categoryAxis.minorGridAlpha = 0.1;
            //categoryAxis.offset = 83;

            // value
            var valueAxis = new AmCharts.ValueAxis();
            valueAxis.axisAlpha = 0;
            valueAxis.inside = true;
            valueAxis.dashLength = 3;
            valueAxis.labelOffset = -30;
            tds_chart.addValueAxis(valueAxis);

            // GRAPH
            var tds_graph = new AmCharts.AmGraph();
            tds_graph.type = "smoothedLine"; // this line makes the graph smoothed line.
            tds_graph.lineColor = "#FF9E3A";
            tds_graph.negativeBase = "1000";
            tds_graph.negativeLineColor = "#41A6A8"; // this line makes the graph to change color when it drops below 0
            tds_graph.bullet = "round";
            tds_graph.bulletSize = 8;
            tds_graph.bulletBorderColor = "#FFFFFF";
            tds_graph.bulletBorderAlpha = 1;
            tds_graph.bulletBorderThickness = 2;
            tds_graph.lineThickness = 2;
            tds_graph.valueField = "tds";
            tds_graph.selectedBackgroundColor = "#FFF";
            tds_graph.balloonText = "[[category]]<br><b><span style='font-size:14px;'>[[value]]</span></b>";
            tds_chart.addGraph(tds_graph);

            // CURSOR
            var chartCursor = new AmCharts.ChartCursor();
            chartCursor.cursorAlpha = 0;
            chartCursor.cursorPosition = "mouse";
            chartCursor.categoryBalloonDateFormat = "DD MMM YYYY, @HH:NN";
            chartCursor.cursorColor = "#47DBB7";
            tds_chart.addChartCursor(chartCursor);

            // SCROLLBAR
            var chartScrollbar = new AmCharts.ChartScrollbar();
            tds_chart.addChartScrollbar(chartScrollbar);

            // WRITE
            tds_chart.write("tds_chartDiv");
        });

        //Create PS Graph
        AmCharts.ready(function () {
            // SERIAL CHART
            var ps_chart = new AmCharts.AmSerialChart();

            ps_chart.dataProvider = ecChartData;
            ps_chart.marginLeft = 10;
            ps_chart.categoryField = "date";

            // listen for "dataUpdated" event (fired when chart is inited) and call zoomChart method when it happens
            ps_chart.addListener("dataUpdated", zoomChart);
            function zoomChart() {
                // different zoom methods can be used - zoomToIndexes, zoomToDates, zoomToCategoryValues
                //ph_chart.zoomToDates(new Date(1972, 0), new Date(1984, 0));
                ps_chart.zoomToIndexes(0,30);
            }

            // AXES
            // category
            var categoryAxis = ps_chart.categoryAxis;
            categoryAxis.parseDates = true; // as our data is date-based, we set parseDates to true
            categoryAxis.minPeriod = "mm"; // our data is yearly, so we set minPeriod to YYYY
            categoryAxis.dashLength = 3;
            categoryAxis.minorGridEnabled = true;
            categoryAxis.minorGridAlpha = 0.1;
            //categoryAxis.offset = 83;

            // value
            var valueAxis = new AmCharts.ValueAxis();
            valueAxis.axisAlpha = 0;
            valueAxis.inside = true;
            valueAxis.dashLength = 3;
            valueAxis.labelOffset = -30;
            ps_chart.addValueAxis(valueAxis);

            // GRAPH
            ps_graph = new AmCharts.AmGraph();
            ps_graph.type = "smoothedLine"; // this line makes the graph smoothed line.
            ps_graph.lineColor = "#FF9E3A";
            ps_graph.negativeBase = "1000";
            ps_graph.negativeLineColor = "#41A6A8"; // this line makes the graph to change color when it drops below 0
            ps_graph.bullet = "round";
            ps_graph.bulletSize = 8;
            ps_graph.bulletBorderColor = "#FFFFFF";
            ps_graph.bulletBorderAlpha = 1;
            ps_graph.bulletBorderThickness = 2;
            ps_graph.lineThickness = 2;
            ps_graph.valueField = "ps";
            ps_graph.selectedBackgroundColor = "#FFF";
            ps_graph.balloonText = "[[category]]<br><b><span style='font-size:14px;'>[[value]]</span></b>";
            ps_chart.addGraph(ps_graph);

            // CURSOR
            var chartCursor = new AmCharts.ChartCursor();
            chartCursor.cursorAlpha = 0;
            chartCursor.cursorPosition = "mouse";
            chartCursor.categoryBalloonDateFormat = "DD MMM YYYY, @HH:NN";
            chartCursor.cursorColor = "#47DBB7";
            ps_chart.addChartCursor(chartCursor);

            // SCROLLBAR
            var chartScrollbar = new AmCharts.ChartScrollbar();
            ps_chart.addChartScrollbar(chartScrollbar);

            // WRITE
            ps_chart.write("ps_chartDiv");
        });

        //Create Lux Graph
        AmCharts.ready(function () {
            // SERIAL CHART
            var lux_chart = new AmCharts.AmSerialChart();

            lux_chart.dataProvider = luxChartData;
            lux_chart.marginLeft = 10;
            lux_chart.categoryField = "date";

            // listen for "dataUpdated" event (fired when chart is inited) and call zoomChart method when it happens
            lux_chart.addListener("dataUpdated", zoomChart);
            function zoomChart() {
                // different zoom methods can be used - zoomToIndexes, zoomToDates, zoomToCategoryValues
                //ph_chart.zoomToDates(new Date(1972, 0), new Date(1984, 0));
                lux_chart.zoomToIndexes(0,30);
            }

            // AXES
            // category
            var categoryAxis = lux_chart.categoryAxis;
            categoryAxis.parseDates = true; // as our data is date-based, we set parseDates to true
            categoryAxis.minPeriod = "mm"; // our data is yearly, so we set minPeriod to YYYY
            categoryAxis.dashLength = 3;
            categoryAxis.minorGridEnabled = true;
            categoryAxis.minorGridAlpha = 0.1;
            //categoryAxis.offset = 83;

            // value
            var valueAxis = new AmCharts.ValueAxis();
            valueAxis.axisAlpha = 0;
            valueAxis.inside = true;
            valueAxis.dashLength = 3;
            valueAxis.labelOffset = -30;
            lux_chart.addValueAxis(valueAxis);

            // GRAPH
            lux_graph = new AmCharts.AmGraph();
            lux_graph.type = "smoothedLine"; // this line makes the graph smoothed line.
            lux_graph.lineColor = "#FF9E3A";
            lux_graph.negativeBase = "50";
            lux_graph.negativeLineColor = "#41A6A8"; // this line makes the graph to change color when it drops below 0
            lux_graph.bullet = "round";
            lux_graph.bulletSize = 8;
            lux_graph.bulletBorderColor = "#FFFFFF";
            lux_graph.bulletBorderAlpha = 1;
            lux_graph.bulletBorderThickness = 2;
            lux_graph.lineThickness = 2;
            lux_graph.valueField = "value";
            lux_graph.selectedBackgroundColor = "#FFF";
            lux_graph.balloonText = "[[category]]<br><b><span style='font-size:14px;'>[[value]]</span></b>";
            lux_chart.addGraph(lux_graph);

            // CURSOR
            var chartCursor = new AmCharts.ChartCursor();
            chartCursor.cursorAlpha = 0;
            chartCursor.cursorPosition = "mouse";
            chartCursor.categoryBalloonDateFormat = "DD MMM YYYY, @HH:NN";
            chartCursor.cursorColor = "#47DBB7";
            lux_chart.addChartCursor(chartCursor);

            // SCROLLBAR
            var chartScrollbar = new AmCharts.ChartScrollbar();
            lux_chart.addChartScrollbar(chartScrollbar);

            // WRITE
            lux_chart.write("lux_chartDiv");
        });

        //Create AirTemp Graph
        AmCharts.ready(function () {
            // SERIAL CHART
            var airTemp_chart = new AmCharts.AmSerialChart();

            airTemp_chart.dataProvider = airTempData;
            airTemp_chart.marginLeft = 10;
            airTemp_chart.categoryField = "date";

            // listen for "dataUpdated" event (fired when chart is inited) and call zoomChart method when it happens
            airTemp_chart.addListener("dataUpdated", zoomChart);
            function zoomChart() {
                // different zoom methods can be used - zoomToIndexes, zoomToDates, zoomToCategoryValues
                //ph_chart.zoomToDates(new Date(1972, 0), new Date(1984, 0));
                airTemp_chart.zoomToIndexes(0,30);
            }

            // AXES
            // category
            var categoryAxis = airTemp_chart.categoryAxis;
            categoryAxis.parseDates = true; // as our data is date-based, we set parseDates to true
            categoryAxis.minPeriod = "mm"; // our data is yearly, so we set minPeriod to YYYY
            categoryAxis.dashLength = 3;
            categoryAxis.minorGridEnabled = true;
            categoryAxis.minorGridAlpha = 0.1;
            //categoryAxis.offset = 83;

            // value
            var valueAxis = new AmCharts.ValueAxis();
            valueAxis.axisAlpha = 0;
            valueAxis.inside = true;
            valueAxis.dashLength = 3;
            valueAxis.labelOffset = -30;
            airTemp_chart.addValueAxis(valueAxis);

            // GRAPH
            airTemp_graph = new AmCharts.AmGraph();
            airTemp_graph.type = "smoothedLine"; // this line makes the graph smoothed line.
            airTemp_graph.lineColor = "#FF9E3A";
            airTemp_graph.negativeBase = "50";
            airTemp_graph.negativeLineColor = "#41A6A8"; // this line makes the graph to change color when it drops below 0
            airTemp_graph.bullet = "round";
            airTemp_graph.bulletSize = 8;
            airTemp_graph.bulletBorderColor = "#FFFFFF";
            airTemp_graph.bulletBorderAlpha = 1;
            airTemp_graph.bulletBorderThickness = 2;
            airTemp_graph.lineThickness = 2;
            airTemp_graph.valueField = "value";
            airTemp_graph.selectedBackgroundColor = "#FFF";
            airTemp_graph.balloonText = "[[category]]<br><b><span style='font-size:14px;'>[[value]]</span></b>";
            airTemp_chart.addGraph(airTemp_graph);

            // CURSOR
            var chartCursor = new AmCharts.ChartCursor();
            chartCursor.cursorAlpha = 0;
            chartCursor.cursorPosition = "mouse";
            chartCursor.categoryBalloonDateFormat = "DD MMM YYYY, @HH:NN";
            chartCursor.cursorColor = "#47DBB7";
            airTemp_chart.addChartCursor(chartCursor);

            // SCROLLBAR
            var chartScrollbar = new AmCharts.ChartScrollbar();
            airTemp_chart.addChartScrollbar(chartScrollbar);

            // WRITE
            airTemp_chart.write("airTemp_chartDiv");
        });

        //Create WaterTemp Graph
        AmCharts.ready(function () {
            // SERIAL CHART
            var waterTemp_chart = new AmCharts.AmSerialChart();

            waterTemp_chart.dataProvider = waterTempData;
            waterTemp_chart.marginLeft = 10;
            waterTemp_chart.categoryField = "date";

            // listen for "dataUpdated" event (fired when chart is inited) and call zoomChart method when it happens
            waterTemp_chart.addListener("dataUpdated", zoomChart);
            function zoomChart() {
                // different zoom methods can be used - zoomToIndexes, zoomToDates, zoomToCategoryValues
                //ph_chart.zoomToDates(new Date(1972, 0), new Date(1984, 0));
                waterTemp_chart.zoomToIndexes(0,30);
            }

            // AXES
            // category
            var categoryAxis = waterTemp_chart.categoryAxis;
            categoryAxis.parseDates = true; // as our data is date-based, we set parseDates to true
            categoryAxis.minPeriod = "mm"; // our data is yearly, so we set minPeriod to YYYY
            categoryAxis.dashLength = 3;
            categoryAxis.minorGridEnabled = true;
            categoryAxis.minorGridAlpha = 0.1;
            //categoryAxis.offset = 83;

            // value
            var valueAxis = new AmCharts.ValueAxis();
            valueAxis.axisAlpha = 0;
            valueAxis.inside = true;
            valueAxis.dashLength = 3;
            valueAxis.labelOffset = -30;
            waterTemp_chart.addValueAxis(valueAxis);

            // GRAPH
            waterTemp_graph = new AmCharts.AmGraph();
            waterTemp_graph.type = "smoothedLine"; // this line makes the graph smoothed line.
            waterTemp_graph.lineColor = "#FF9E3A";
            waterTemp_graph.negativeBase = "50";
            waterTemp_graph.negativeLineColor = "#41A6A8"; // this line makes the graph to change color when it drops below 0
            waterTemp_graph.bullet = "round";
            waterTemp_graph.bulletSize = 8;
            waterTemp_graph.bulletBorderColor = "#FFFFFF";
            waterTemp_graph.bulletBorderAlpha = 1;
            waterTemp_graph.bulletBorderThickness = 2;
            waterTemp_graph.lineThickness = 2;
            waterTemp_graph.valueField = "value";
            waterTemp_graph.selectedBackgroundColor = "#FFF";
            waterTemp_graph.balloonText = "[[category]]<br><b><span style='font-size:14px;'>[[value]]</span></b>";
            waterTemp_chart.addGraph(waterTemp_graph);

            // CURSOR
            var chartCursor = new AmCharts.ChartCursor();
            chartCursor.cursorAlpha = 0;
            chartCursor.cursorPosition = "mouse";
            chartCursor.categoryBalloonDateFormat = "DD MMM YYYY, @HH:NN";
            chartCursor.cursorColor = "#47DBB7";
            waterTemp_chart.addChartCursor(chartCursor);

            // SCROLLBAR
            var chartScrollbar = new AmCharts.ChartScrollbar();
            waterTemp_chart.addChartScrollbar(chartScrollbar);

            // WRITE
            waterTemp_chart.write("waterTemp_chartDiv");
        });

        //Create Humidity Graph
        AmCharts.ready(function () {
            // SERIAL CHART
            var humidity_chart = new AmCharts.AmSerialChart();

            humidity_chart.dataProvider = humidityData;
            humidity_chart.marginLeft = 10;
            humidity_chart.categoryField = "date";

            // listen for "dataUpdated" event (fired when chart is inited) and call zoomChart method when it happens
            humidity_chart.addListener("dataUpdated", zoomChart);
            function zoomChart() {
                // different zoom methods can be used - zoomToIndexes, zoomToDates, zoomToCategoryValues
                //ph_chart.zoomToDates(new Date(1972, 0), new Date(1984, 0));
                humidity_chart.zoomToIndexes(humidityData.length - 12,humidityData.length);
            }

            // AXES
            // category
            var categoryAxis = humidity_chart.categoryAxis;
            categoryAxis.parseDates = true; // as our data is date-based, we set parseDates to true
            categoryAxis.minPeriod = "mm"; // our data is yearly, so we set minPeriod to YYYY
            categoryAxis.dashLength = 3;
            categoryAxis.minorGridEnabled = true;
            categoryAxis.minorGridAlpha = 0.1;
            //categoryAxis.offset = 83;

            // value
            var valueAxis = new AmCharts.ValueAxis();
            valueAxis.axisAlpha = 0;
            valueAxis.inside = true;
            valueAxis.dashLength = 3;
            valueAxis.labelOffset = -30;
            humidity_chart.addValueAxis(valueAxis);

            // GRAPH
            humidity_graph = new AmCharts.AmGraph();
            humidity_graph.type = "smoothedLine"; // this line makes the graph smoothed line.
            humidity_graph.lineColor = "#FF9E3A";
            humidity_graph.negativeBase = "50";
            humidity_graph.negativeLineColor = "#41A6A8"; // this line makes the graph to change color when it drops below 0
            humidity_graph.bullet = "round";
            humidity_graph.bulletSize = 8;
            humidity_graph.bulletBorderColor = "#FFFFFF";
            humidity_graph.bulletBorderAlpha = 1;
            humidity_graph.bulletBorderThickness = 2;
            humidity_graph.lineThickness = 2;
            humidity_graph.valueField = "value";
            humidity_graph.selectedBackgroundColor = "#FFF";
            humidity_graph.balloonText = "[[category]]<br><b><span style='font-size:14px;'>[[value]]</span></b>";
            humidity_chart.addGraph(humidity_graph);

            // CURSOR
            var chartCursor = new AmCharts.ChartCursor();
            chartCursor.cursorAlpha = 0;
            chartCursor.cursorPosition = "mouse";
            chartCursor.categoryBalloonDateFormat = "DD MMM YYYY, @HH:NN";
            chartCursor.cursorColor = "#47DBB7";
            humidity_chart.addChartCursor(chartCursor);

            // SCROLLBAR
            var chartScrollbar = new AmCharts.ChartScrollbar();
            humidity_chart.addChartScrollbar(chartScrollbar);

            // WRITE
            humidity_chart.write("humidity_chartDiv");
        });

        AmCharts.ready(function () {
            // SERIAL CHART
            var ec_overview_chart = new AmCharts.AmSerialChart();
            //chart.addClassNames = true;
            ec_overview_chart.dataProvider = ecChartData;
            ec_overview_chart.categoryField = "date";
            //chart.dataDateFormat = "YYYY-MM-DD";
            //chart.startDuration = 1;
            //chart.color = "#000";
            ec_overview_chart.marginLeft = 0;

            // listen for "dataUpdated" event (fired when chart is inited) and call zoomChart method when it happens
            ec_overview_chart.addListener("dataUpdated", zoomChart);
            function zoomChart() {
                // different zoom methods can be used - zoomToIndexes, zoomToDates, zoomToCategoryValues
                //ph_chart.zoomToDates(new Date(1972, 0), new Date(1984, 0));
                ec_overview_chart.zoomToIndexes(ecChartData.length - 12,ecChartData.length);
            }

            // AXES
            // category
            var categoryAxis = ec_overview_chart.categoryAxis;
            categoryAxis.parseDates = true; // as our data is date-based, we set parseDates to true
            categoryAxis.minPeriod = "mm"; // our data is daily, so we set minPeriod to DD
            categoryAxis.autoGridCount = true;
            //categoryAxis.gridCount = 50;
            categoryAxis.gridAlpha = 0.1;
            categoryAxis.gridColor = "#000";
            categoryAxis.axisColor = "#000";
            // we want custom date formatting, so we change it in next line
            /*categoryAxis.dateFormats = [{
                period: 'DD',
                format: 'DD'
            }, {
                period: 'WW',
                format: 'MMM DD'
            }, {
                period: 'MM',
                format: 'MMM'
            }, {
                period: 'YYYY',
                format: 'YYYY'
            }];*/

            // as we have data of different units, we create three different value axes
            // Distance value axis
            var ecAxis = new AmCharts.ValueAxis();
            ecAxis.title = "EC Value";
            ecAxis.gridAlpha = 0;
            ecAxis.axisAlpha = 0;
            ec_overview_chart.addValueAxis(ecAxis);

            // latitude value axis
            var tdsAxis = new AmCharts.ValueAxis();
            tdsAxis.gridAlpha = 0;
            tdsAxis.axisAlpha = 0;
            tdsAxis.title = "TDS & PS";
            tdsAxis.offset = 0;
            tdsAxis.titleOffset = 10;
            tdsAxis.position = "right";
            ec_overview_chart.addValueAxis(tdsAxis);

            // duration value axis
            var durationAxis = new AmCharts.ValueAxis();
            // the following line makes this value axis to convert values to duration
            // it tells the axis what duration unit it should use. mm - minute, hh - hour...
            durationAxis.duration = "mm";
            durationAxis.gridAlpha = 0;
            durationAxis.axisAlpha = 0;
            durationAxis.inside = false;
            durationAxis.position = "right";
            ec_overview_chart.addValueAxis(durationAxis);

            // GRAPHS
            // EC graph
            var ecGraph = new AmCharts.AmGraph();
            ecGraph.valueField = "ec_value";
            ecGraph.title = "distance";
            ecGraph.type = "column";
            ecGraph.fillAlphas = 0.9;
            ecGraph.columnWidth = 10;
            ecGraph.valueAxis = ecAxis; // indicate which axis should be used
            ecGraph.balloonText = "EC: [[value]] &mu;S";
            ecGraph.legendValueText = " ";
            //ecGraph.legendPeriodValueText = "total: [[value.sum]] &mu;S";
            ecGraph.lineColor = "#263138";
            ecGraph.alphaField = "alpha";
            ec_overview_chart.addGraph(ecGraph);

            // TDS graph
            var tdsGraph = new AmCharts.AmGraph();
            tdsGraph.valueField = "tds";
            tdsGraph.id = "g1";
            tdsGraph.classNameField = "bulletClass";
            tdsGraph.title = "Total Disolved Solids";
            tdsGraph.type = "line";
            tdsGraph.valueAxis = tdsAxis; // indicate which axis should be used
            tdsGraph.lineColor = "#786c56";
            tdsGraph.lineThickness = 1;
            tdsGraph.legendValueText = " ";
            //tdsGraph.descriptionField = "townName";
            tdsGraph.bullet = "round";
            tdsGraph.bulletSize = 10; // indicate which field should be used for bullet size
            tdsGraph.bulletBorderColor = "#786c56";
            tdsGraph.bulletBorderAlpha = 1;
            tdsGraph.bulletBorderThickness = 2;
            tdsGraph.bulletColor = "#000000";
            //tdsGraph.labelText = "[[value]]"; // not all data points has townName2 specified, that's why labels are displayed only near some of the bullets.
            tdsGraph.labelPosition = "right";
            tdsGraph.balloonText = "TDS:[[value]]";
            tdsGraph.showBalloon = true;
            tdsGraph.animationPlayed = true;
            ec_overview_chart.addGraph(tdsGraph);

            // duration graph
            var durationGraph = new AmCharts.AmGraph();
            durationGraph.id = "g2";
            durationGraph.title = "duration";
            durationGraph.valueField = "duration";
            durationGraph.type = "line";
            durationGraph.valueAxis = durationAxis; // indicate which axis should be used
            durationGraph.lineColor = "#ff5755";
            durationGraph.balloonText = "[[value]]";
            durationGraph.lineThickness = 1;
            durationGraph.legendValueText = "[[value]]";
            durationGraph.bullet = "square";
            durationGraph.bulletBorderColor = "#ff5755";
            durationGraph.bulletBorderThickness = 1;
            durationGraph.bulletBorderAlpha = 1;
            durationGraph.dashLengthField = "dashLength";
            durationGraph.animationPlayed = true;
            ec_overview_chart.addGraph(durationGraph);

            // CURSOR
            var chartCursor = new AmCharts.ChartCursor();
            chartCursor.zoomable = true;
            chartCursor.categoryBalloonDateFormat = undefined;
            chartCursor.cursorAlpha = 0;
            chartCursor.valueBalloonsEnabled = false;
            chartCursor.valueLineBalloonEnabled = true;
            chartCursor.valueLineEnabled = true;
            chartCursor.valueLineAlpha = 0.5;
            chartCursor.cursorColor = "#41A6A8";
            ec_overview_chart.addChartCursor(chartCursor);

            // LEGEND
            var legend = new AmCharts.AmLegend();
            legend.bulletType = "round";
            legend.equalWidths = false;
            legend.valueWidth = 120;
            legend.useGraphSettings = true;
            legend.color = "#000";
            ec_overview_chart.addLegend(legend);

            // SCROLLBAR
            var chartScrollbar = new AmCharts.ChartScrollbar();
            ec_overview_chart.addChartScrollbar(chartScrollbar);

            // WRITE
            ec_overview_chart.write("ec_overview_chartdiv");

        });


        // this method is called when chart is first inited as we listen for "dataUpdated" event

    </script>
</head>

<!-- #BODY -->
<body class="smart-style-3 fixed-header fixed-navigation">

<!-- HEADER -->
<header id="header">
    <div id="logo-group">

        <!-- PLACE YOUR LOGO HERE -->
        <span id="logo"> <img src="img/hydrobase_logo2.png" alt="SmartAdmin"> </span>
        <!-- END LOGO PLACEHOLDER -->

        <!-- Note: The activity badge color changes when clicked and resets the number to 0
        Suggestion: You may want to set a flag when this happens to tick off all checked messages / notifications -->
        <span id="activity" class="activity-dropdown hidden-xs"> <i class="fa fa-exclamation-circle"></i> <b class="badge"> 21 </b> </span>

        <!-- AJAX-DROPDOWN : control this dropdown height, look and feel from the LESS variable file -->
        <div class="ajax-dropdown">

            <!-- the ID links are fetched via AJAX to the ajax container "ajax-notifications" -->
            <div class="btn-group btn-group-justified" data-toggle="buttons">
                <label class="btn btn-default">
                    <input type="radio" name="activity" id="ajax/notify/mail.html">
                    Msgs (14) </label>
                <label class="btn btn-default">
                    <input type="radio" name="activity" id="ajax/notify/notifications.html">
                    notify (3) </label>
                <label class="btn btn-default">
                    <input type="radio" name="activity" id="ajax/notify/tasks.html">
                    Tasks (4) </label>
            </div>

            <!-- notification content -->
            <div class="ajax-notifications custom-scroll">

                <div class="alert alert-transparent">
                    <h4>Click a button to show messages here</h4>
                    This blank page message helps protect your privacy, or you can show the first message here automatically.
                </div>

                <i class="fa fa-lock fa-4x fa-border"></i>

            </div>
            <!-- end notification content -->

            <!-- footer: refresh area -->
					<span> Last updated on: 12/12/2013 9:43AM
						<button type="button" data-loading-text="<i class='fa fa-refresh fa-spin'></i> Loading..." class="btn btn-xs btn-default pull-right">
                            <i class="fa fa-refresh"></i>
                        </button>
					</span>
            <!-- end footer -->

        </div>
        <!-- END AJAX-DROPDOWN -->
    </div>

    <!-- pulled right: nav area -->
    <div class="pull-right">

        <!-- collapse menu button -->
        <div id="hide-menu" class="btn-header pull-right">
            <span> <a href="javascript:void(0);" data-action="toggleMenu" title="Collapse Menu"><i class="fa fa-reorder"></i></a> </span>
        </div>
        <!-- end collapse menu -->

        <!-- #MOBILE -->
        <!-- Top menu profile link : this shows only when top menu is active -->
        <ul id="mobile-profile-img" class="header-dropdown-list hidden-xs padding-5">
            <li class="">
                <a href="#" class="dropdown-toggle no-margin userdropdown" data-toggle="dropdown">
                    <img src="img/avatars/sunny.png" alt="John Doe" class="online" />
                </a>
                <ul class="dropdown-menu pull-right">
                    <li>
                        <a href="javascript:void(0);" class="padding-10 padding-top-0 padding-bottom-0"><i class="fa fa-cog"></i> Setting</a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a href="profile.html" class="padding-10 padding-top-0 padding-bottom-0"> <i class="fa fa-user"></i> <u>P</u>rofile</a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a href="javascript:void(0);" class="padding-10 padding-top-0 padding-bottom-0" data-action="toggleShortcut"><i class="fa fa-arrow-down"></i> <u>S</u>hortcut</a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a href="javascript:void(0);" class="padding-10 padding-top-0 padding-bottom-0" data-action="launchFullscreen"><i class="fa fa-arrows-alt"></i> Full <u>S</u>creen</a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a href="login.html" class="padding-10 padding-top-5 padding-bottom-5" data-action="userLogout"><i class="fa fa-sign-out fa-lg"></i> <strong><u>L</u>ogout</strong></a>
                    </li>
                </ul>
            </li>
        </ul>

        <!-- logout button -->
        <div id="logout" class="btn-header transparent pull-right">
            <span> <a href="login.html" title="Sign Out" data-action="userLogout" data-logout-msg="You can improve your security further after logging out by closing this opened browser"><i class="fa fa-sign-out"></i></a> </span>
        </div>
        <!-- end logout button -->

        <!-- fullscreen button -->
        <div id="fullscreen" class="btn-header transparent pull-right">
            <span> <a href="javascript:void(0);" data-action="launchFullscreen" title="Full Screen"><i class="fa fa-arrows-alt"></i></a> </span>
        </div>
        <!-- end fullscreen button -->

    </div>
    <!-- end pulled right: nav area -->

</header>
<!-- END HEADER -->

<!-- Left panel : Navigation area -->
<!-- Note: This width of the aside area can be adjusted through LESS variables -->
<aside id="left-panel">

    <!-- User info -->
    <div class="login-info">
				<span> <!-- User image size is adjusted inside CSS, it should stay as it -->

					<a href="javascript:void(0);" id="show-shortcut" data-action="toggleShortcut">
                        <img src="https://avatars3.githubusercontent.com/u/7218875?v=3&s=460" alt="me" class="online" />
						<span>
							Juan Shishido
						</span>
                        <i class="fa fa-angle-down"></i>
                    </a>

				</span>
    </div>
    <!-- end user info -->

    <!-- NAVIGATION : This navigation is also responsive-->
    <nav>
        <ul>
            <li>
                <a href="index.html" title="Dashboard"><i class="fa fa-lg fa-fw fa-home"></i> <span class="menu-item-parent">Dashboard</span></a>
            </li>
            <li>
                <a href="devices.html"><i class="fa fa-lg fa-fw fa-cogs"></i> <span class="menu-item-parent">Devices</span></a>
            </li>
            <li  class="active">
                <a href="#"><i class="fa fa-lg fa-fw fa-pagelines"></i> <span class="menu-item-parent">Grows</span></a>
                <ul>
                    <li>
                        <a href="flot.html">Avi</a>
                    </li>
                    <li>
                        <a href="morris.html">Lilly</a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="#"><i class="fa fa-lg fa-fw fa-flask"></i> <span class="menu-item-parent">Experiments</span></a>
                <ul>
                    <li>
                        <a href="table.html">Salinity Test</a>
                    </li>
                    <li>
                        <a href="datatables.html">pH Test</a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="#"><i class="fa fa-lg fa-fw fa-pencil-square-o"></i> <span class="menu-item-parent">Plant Profiles</span></a>
                <ul>
                    <li>
                        <a href="form-elements.html">Smart Form Elements</a>
                    </li>
                    <li>
                        <a href="form-templates.html">Smart Form Layouts</a>
                    </li>
                    <li>
                        <a href="validation.html">Smart Form Validation</a>
                    </li>
                    <li>
                        <a href="bootstrap-forms.html">Bootstrap Form Elements</a>
                    </li>
                    <li>
                        <a href="bootstrap-validator.html">Bootstrap Form Validation</a>
                    </li>
                    <li>
                        <a href="plugins.html">Form Plugins</a>
                    </li>
                    <li>
                        <a href="wizard.html">Wizards</a>
                    </li>
                    <li>
                        <a href="other-editors.html">Bootstrap Editors</a>
                    </li>
                    <li>
                        <a href="dropzone.html">Dropzone </a>
                    </li>
                    <li>
                        <a href="image-editor.html">Image Cropping <span class="badge pull-right inbox-badge bg-color-yellow">new</span></a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="#"><i class="fa fa-lg fa-fw fa-file-text"></i> <span class="menu-item-parent">Documentation</span></a>
                <ul>
                    <li>
                        <a href="general-elements.html">General Elements</a>
                    </li>
                    <li>
                        <a href="buttons.html">Buttons</a>
                    </li>
                    <li>
                        <a href="#">Icons</a>
                        <ul>
                            <li>
                                <a href="fa.html"><i class="fa fa-plane"></i> Font Awesome</a>
                            </li>
                            <li>
                                <a href="glyph.html"><i class="glyphicon glyphicon-plane"></i> Glyph Icons</a>
                            </li>
                            <li>
                                <a href="flags.html"><i class="fa fa-flag"></i> Flags</a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="grid.html">Grid</a>
                    </li>
                    <li>
                        <a href="treeview.html">Tree View</a>
                    </li>
                    <li>
                        <a href="nestable-list.html">Nestable Lists</a>
                    </li>
                    <li>
                        <a href="jqui.html">JQuery UI</a>
                    </li>
                    <li>
                        <a href="typography.html">Typography</a>
                    </li>
                    <li>
                        <a href="#">Six Level Menu</a>
                        <ul>
                            <li>
                                <a href="#"><i class="fa fa-fw fa-folder-open"></i> Item #2</a>
                                <ul>
                                    <li>
                                        <a href="#"><i class="fa fa-fw fa-folder-open"></i> Sub #2.1 </a>
                                        <ul>
                                            <li>
                                                <a href="#"><i class="fa fa-fw fa-file-text"></i> Item #2.1.1</a>
                                            </li>
                                            <li>
                                                <a href="#"><i class="fa fa-fw fa-plus"></i> Expand</a>
                                                <ul>
                                                    <li>
                                                        <a href="#"><i class="fa fa-fw fa-file-text"></i> File</a>
                                                    </li>
                                                    <li>
                                                        <a href="#"><i class="fa fa-fw fa-trash-o"></i> Delete</a></li>
                                                </ul>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                            <li>
                                <a href="#"><i class="fa fa-fw fa-folder-open"></i> Item #3</a>

                                <ul>
                                    <li>
                                        <a href="#"><i class="fa fa-fw fa-folder-open"></i> 3ed Level </a>
                                        <ul>
                                            <li>
                                                <a href="#"><i class="fa fa-fw fa-file-text"></i> File</a>
                                            </li>
                                            <li>
                                                <a href="#"><i class="fa fa-fw fa-file-text"></i> File</a>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>

                            </li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>
    </nav>
        <span class="minifyme" data-action="minifyMenu">
            <i class="fa fa-arrow-circle-left hit"></i>
        </span>

</aside>
<!-- END NAVIGATION -->

<!-- MAIN PANEL -->
<div id="main" role="main">
    <!-- RIBBON -->
    <div id="ribbon">

				<span class="ribbon-button-alignment">
					<span id="refresh" class="btn btn-ribbon" data-action="resetWidgets" data-title="refresh"  rel="tooltip" data-placement="bottom" data-original-title="<i class='text-warning fa fa-warning'></i> Warning! This will reset all your widget settings." data-html="true">
						<i class="fa fa-refresh"></i>
					</span>
				</span>

        <!-- breadcrumb -->
        <ol class="breadcrumb">
            <li>Hydrobase</li><li>Grows</li><li>Avi</li>
        </ol>
        <!-- end breadcrumb -->

        <!-- You can also add more buttons to the
        ribbon for further usability

        Example below:

        <span class="ribbon-button-alignment pull-right">
        <span id="search" class="btn btn-ribbon hidden-xs" data-title="search"><i class="fa-grid"></i> Change Grid</span>
        <span id="add" class="btn btn-ribbon hidden-xs" data-title="add"><i class="fa-plus"></i> Add</span>
        <span id="search" class="btn btn-ribbon" data-title="search"><i class="fa-search"></i> <span class="hidden-mobile">Search</span></span>
        </span> -->

    </div>
    <!-- END RIBBON -->

    <!-- MAIN CONTENT -->
    <div id="content">
        <div class="row">
            <div class="col-xs-12 col-sm-7 col-md-7 col-lg-4">
                <h1 class="page-title txt-color-blueDark"><i class="fa-fw fa fa-pagelines"></i> Pete</h1>
            </div>
        </div>
        <!-- widget grid -->
       <section id="widget-grid">
           <div class="row">
               <!-- NEW WIDGET START -->
               <article class="col-xs-12 col-sm-12 col-md-12 col-lg-6">

                   <!-- Widget ID (each widget will need unique ID)-->
                   <div class="jarviswidget" id="wid-id-1" data-widget-editbutton="false" data-widget-colorbutton="false" data-widget-deletebutton="false">
                       <header>
                           <span class="widget-icon"> <i class="fa fa-wrench"></i> </span>
                           <h2>Set Up</h2>

                       </header>

                       <!-- widget div-->
                       <div>

                           <!-- widget edit box -->
                           <div class="jarviswidget-editbox">
                               <!-- This area used as dropdown edit box -->

                           </div>
                           <!-- end widget edit box -->

                           <!-- widget content -->
                           <div class="widget-body">
                               <p>
                                   Pete: Piranah Plant
                               </p>
                               <hr class="simple">
                               <ul id="tab_list" class="nav nav-tabs bordered">
                                   <li class="active">
                                       <a href="#devices_tab" data-toggle="tab"><i class="fa fa-fw fa-lg fa-cogs"></i> Device</a>
                                   </li>
                                   <li>
                                       <a href="#controls_tab" data-toggle="tab"><i class="fa fa-fw fa-lg fa-gear"></i> Controls</a>
                                   </li>
                                   <li>
                                       <a href="#photos_tab" data-toggle="tab"><i class="fa fa-fw fa-lg fa-camera"></i> Photos</a>
                                   </li>
                               </ul>

                               <div id="plant_info_tabContent" class="tab-content padding-10">
                                   <div class="tab-pane fade in active" id="devices_tab">
                                       <p>
                                           I have six <a title="test">this is a test</a> locks on my door all in a row. When I go out, I lock every other one. I figure no matter how long somebody stands there picking the locks, they are always locking three.
                                       </p>
                                   </div>
                                   <div class="tab-pane fade" id="controls_tab">
                                       <p>
                                           Food truck fixie locavore, accusamus mcsweeney's marfa nulla single-origin coffee squid. Exercitation +1 labore velit, blog sartorial PBR leggings next level wes anderson artisan four loko farm-to-table craft beer twee.
                                       </p>
                                   </div>
                                   <div class="tab-pane fade" id="photos_tab">
                                       <p>
                                           Etsy mixtape wayfarers, ethical wes anderson tofu before they sold out mcsweeney's organic lomo retro fanny pack lo-fi farm-to-table readymade. Messenger bag gentrify pitchfork tattooed craft beer, iphone skateboard locavore carles etsy salvia banksy hoodie helvetica. DIY synth PBR banksy irony.
                                       </p>
                                   </div>
                               </div>

                           </div>
                           <!-- end widget content -->

                       </div>
                       <!-- end widget div -->

                   </div>
                   <!-- end widget -->

               </article>
               <!-- WIDGET END -->
               <!-- NEW WIDGET START -->
               <article class="col-xs-12 col-sm-12 col-md-12 col-lg-6">

                    <!-- Widget ID (each widget will need unique ID)-->
                    <div class="jarviswidget" id="wid-id-0" data-widget-editbutton="false" data-widget-colorbutton="false" data-widget-deletebutton="false">
                        <header>
                            <span class="widget-icon"> <i class="fa fa-bar-chart-o"></i> </span>
                            <h2>Graphs</h2>

                        </header>

                        <!-- widget div-->
                        <div>

                            <!-- widget edit box -->
                            <div class="jarviswidget-editbox">
                                <!-- This area used as dropdown edit box -->

                            </div>
                            <!-- end widget edit box -->

                            <!-- widget content -->
                            <div class="widget-body no-padding">
                                <hr class="simple">
                                <ul id="plant_tab_list" class="nav nav-tabs bordered">
                                    <li class="active">
                                        <a href="#pH_chart_tab" data-toggle="tab"><span class="typcn_lrg typcn-beaker"></span> pH</a>
                                    </li>
                                    <li class="dropdown" title="test">
                                        <a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown"><span class="typcn_lrg typcn-flash"></span> EC <b class="caret"></b></a>
                                        <ul class="dropdown-menu">
                                            <li>
                                                <a href="#ec_overview_chart_tab" data-toggle="tab">Overview</a>
                                            </li>
                                            <li>
                                                <a href="#ec_chart_tab" data-toggle="tab">EC</a>
                                            </li>
                                            <li>
                                                <a href="#tds_chart_tab" data-toggle="tab">TDS</a>
                                            </li>
                                            <li>
                                                <a href="#ps_chart_tab" data-toggle="tab">PS</a>
                                            </li>
                                        </ul>
                                    </li>
                                    <li>
                                        <a href="#lux_chart_tab" data-toggle="tab"><i class="typcn_lrg typcn-weather-sunny"></i>Lux</a>
                                    </li>
                                    <li class="dropdown">
                                        <a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown"> <span class="typcn_lrg typcn-thermometer"></span> Temp <b class="caret"></b></a>
                                        <ul class="dropdown-menu">
                                            <li>
                                                <a href="#temp_overview_chart_tab" data-toggle="tab">Overview</a>
                                            </li>
                                            <li>
                                                <a href="#airTemp_chart_tab" data-toggle="tab">Air Temp</a>
                                            </li>
                                            <li>
                                                <a href="#waterTemp_chart_tab" data-toggle="tab">Water Temp</a>
                                            </li>
                                        </ul>
                                    </li>
                                    <li>
                                        <a href="#humidity_chart_tab" data-toggle="tab"><i class="typcn_lrg typcn-waves-outline"></i>Humidity</a>
                                    </li>
                                </ul>

                                <div id="plant_data_content" class="tab-content padding-10">
                                    <div class="tab-pane fade in active" id="pH_chart_tab">
                                        <div id="pH_chartDiv" style="width:100%"></div>
                                    </div>
                                    <div class="tab-pane fade" id="ec_overview_chart_tab">
                                        <div id="ec_overview_chartdiv" style="width:100%"></div>
                                    </div>
                                    <div class="tab-pane fade" id="ec_chart_tab">
                                        <div id="ec_chartDiv" style="width:100%"></div>
                                    </div>
                                    <div class="tab-pane fade" id="tds_chart_tab">
                                        <div id="tds_chartDiv" style="width:100%"></div>
                                    </div>
                                    <div class="tab-pane fade" id="ps_chart_tab">
                                        <div id="ps_chartDiv" style="width:100%"></div>
                                    </div>
                                    <div class="tab-pane fade" id="lux_chart_tab">
                                        <div id="lux_chartDiv" style="width:100%"></div>
                                    </div>
                                    <div class="tab-pane fade" id="temp_overview_chart_tab">
                                        <div id="temp_overview_chartDiv" style="width:100%"></div>
                                    </div>
                                    <div class="tab-pane fade" id="airTemp_chart_tab">
                                        <div id="airTemp_chartDiv" style="width:100%"></div>
                                    </div>
                                    <div class="tab-pane fade" id="waterTemp_chart_tab">
                                        <div id="waterTemp_chartDiv" style="width:100%"></div>
                                    </div>
                                    <div class="tab-pane fade" id="humidity_chart_tab">
                                        <div id="humidity_chartDiv" style="width:100%"></div>
                                    </div>
                                </div>

                            </div>
                            <!-- end widget content -->

                        </div>
                        <!-- end widget div -->

                    </div>
                    <!-- end widget -->

                </article>
               <!-- WIDGET END -->
            </div>
       </section>
        <!-- end widget grid -->
    </div>
    <!-- END MAIN CONTENT -->
</div>
<!-- END MAIN PANEL -->

<!-- Add Device Button -->
<a class="add_device"  data-toggle="modal" data-target="#add_new_device_modal"><img src="img/flat_plus.png"></a>
<!-- End of Button Device Button -->
<!-- Add Device Modal -->
<div id="add_new_device_modal" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Add A New Device</h4>
            </div>
            <div class="modal-body">
                <form class="smart-form" id="new_device_form">
                    <fieldset>
                        <section>
                            <label class="label">Device Name</label>
                            <label class="input">
                                <input name="device_name" type="text" class="input-sm">
                            </label>
                        </section>
                        <section>
                            <label class="label">Did You Use Our Kit?</label>
                            <div class="inline-group">
                                <label class="radio">
                                    <input type="radio" name="kit" value="true" id="kit_yes">
                                    <i></i>Yes
                                </label>
                                <label class="radio">
                                    <input type="radio" name="kit" value="false" id="kit_no">
                                    <i></i>No
                                </label>
                            </div>
                        </section>
                    </fieldset>
                    <section id="setUp_options">
                        <header>
                            Set Up
                        </header>
                        <fieldset>
                            <section>
                                <label class="label">Device Type</label>
                                <label class="input">
                                    <input type="text" list="device_list">
                                    <datalist id="device_list">
                                        <option value="Arduino">Arduino</option>
                                        <option value="Photon">Photon</option>
                                        <option value="Raspberry Pi">Raspberry Pi</option>
                                        <option value="Other">Other</option>
                                    </datalist>
                                </label>
                            </section>
                        </fieldset>

                        <fieldset>
                            <section>
                                <label class="label"><h4>Sensors</h4></label>
                                <div class="row">
                                    <div class="col col-6">
                                        <label class="checkbox">
                                            <input type="checkbox" name="Lux" id="lux_checkbox">
                                            <i></i>Lux
                                        </label>
                                        <label class="checkbox">
                                            <input type="checkbox" name="Water_Temp" id="waterTemp_checkbox">
                                            <i></i>Water Temperature
                                        </label>
                                        <label class="checkbox">
                                            <input type="checkbox" name="Air_Temp" id="airTemp_checkbox">
                                            <i></i>Air Temperature
                                        </label>
                                        <label class="checkbox">
                                            <input type="checkbox" name="Humidity" id="humidity_checkbox">
                                            <i></i>Humidity
                                        </label>
                                    </div>
                                    <div class="col col-6">
                                        <label class="checkbox">
                                            <input type="checkbox" name="pH" id="ph_checkbox">
                                            <i></i>pH
                                        </label>
                                        <label class="checkbox">
                                            <input type="checkbox" name="EC" id="ec_checkbox">
                                            <i></i>EC
                                        </label>
                                        <label class="checkbox">
                                            <input type="checkbox" name="TDS" id="tds_checkbox">
                                            <i></i>Total Dissolved Solids
                                        </label>
                                        <label class="checkbox">
                                            <input type="checkbox" name="PS" id="ps_checkbox">
                                            <i></i>Practical Salinity
                                        </label>
                                    </div>
                                </div>
                            </section>
                        </fieldset>

                        <fieldset>
                            <section>
                                <label class="label"><h4>Actuators</h4></label>
                                <div class="col col-6">
                                    <section>
                                        <label class="label">Light 1</label>
                                        <label class="input">
                                            <input name="light_1_pin" type="text" class="input-xs" data-mask="99" placeholder="Pin #">
                                        </label>
                                    </section>
                                </div>
                                <div class="col col-6">
                                    <section>
                                        <label class="label">Light 2</label>
                                        <label class="input">
                                            <input name="light_2_pin" type="text" class="input-xs" data-mask="99" placeholder="Pin #">
                                        </label>
                                    </section>
                                </div>
                                <div class="col col-3">
                                    <section>
                                        <label class="label">Water Pump</label>
                                        <label class="input">
                                            <input name="water_pump_pin" type="text" class="input-xs" data-mask="99" placeholder="Pin #">
                                        </label>
                                    </section>
                                </div>
                                <div class="col col-3">
                                    <section>
                                        <label class="label">Nutrient Pump</label>
                                        <label class="input">
                                            <input name="nutrient_pump_pin" type="text" class="input-xs" data-mask="99" placeholder="Pin #">
                                        </label>
                                    </section>
                                </div>
                                <div class="col col-3">
                                    <section>
                                        <label class="label">pH Upper</label>
                                        <label class="input">
                                            <input name="phUpper_pump_pin" type="text" class="input-xs" data-mask="99" placeholder="Pin #">
                                        </label>
                                    </section>
                                </div>
                                <div class="col col-3">
                                    <section>
                                        <label class="label">pH Downer</label>
                                        <label class="input">
                                            <input name="phDowner_pump_pin" type="text" class="input-xs" data-mask="99" placeholder="Pin #">
                                        </label>
                                    </section>
                                </div>
                            </section>
                        </fieldset>
                    </section>
                    <div class="modal-footer">
                        <button style="margin-top: 20px" type="submit" class="btn btn-primary btn-xs">Save New Device</button>
                        <button style="margin-top: 20px" type="button" class="btn btn-default btn-xs" data-dismiss="modal">Cancel</button>
                    </div>
                </form>
                <div style="margin-top: 20px" class="modal-footer" id="base_sketch">
                    <div class="jarviswidget jarviswidget-color-greenDark" data-widget-colorbutton="false" data-widget-editbutton="false" data-widget-deletebutton="false" data-widget-sortable="false">
                        <!-- widget options:
                            usage: <div class="jarviswidget" id="wid-id-0" data-widget-editbutton="false">

                            data-widget-colorbutton="false"
                            data-widget-editbutton="false"
                            data-widget-togglebutton="false"
                            data-widget-deletebutton="false"
                            data-widget-fullscreenbutton="false"
                            data-widget-custombutton="false"
                            data-widget-collapsed="true"
                            data-widget-sortable="false"

                        -->
                        <header>
                            <span class="widget-icon"> <i class="fa fa-code"></i> </span>
                            <h2><strong>Arduino Code</strong></h2>

                        </header>

                        <!-- widget div-->
                        <div>
                            <!-- widget content -->
                            <div class="widget-body">
                                <pre style="height: 200px">
/**********************************************************************************
 ***********************************************************************************
 * Start Temp-Humid Set-Up
 ***********************************************************************************
 **********************************************************************************/
#include "DHT.h"
#define DHTPIN 2     // what digital pin we're connected to
#define DHTTYPE DHT11
DHT dht(DHTPIN, DHTTYPE);
/***********************************************************************************
 ***********************************************************************************
 * End Temp-Humid Sensor Set-Up
 ***********************************************************************************
 ***********************************************************************************/

/**********************************************************************************
 ***********************************************************************************
 * Start Water Temp Set-Up
 ***********************************************************************************
 **********************************************************************************/
#include &lt;OneWire.h&gt;
int DS18S20_Pin = 4;
OneWire ds(DS18S20_Pin);
/***********************************************************************************
 ***********************************************************************************
 * End Water Temp Sensor Set-Up
 ***********************************************************************************
 ***********************************************************************************/

/**********************************************************************************
 ***********************************************************************************
 * Start Ethernet+PubNub Set-Up
 ***********************************************************************************
 **********************************************************************************/
#include &lt;SPI.h&gt;
#include &lt;Ethernet.h&gt;
#include &lt;PubNub.h&gt;
#include &lt;aJSON.h&gt;

// Some Ethernet shields have a MAC address printed on a sticker on the shield;
// fill in that address here, or choose your own at random:
byte mac[] = { 0xDE, 0xAD, 0xBE, 0xEF, 0xFE, 0xED };

char pubkey[] = "pub-c-5bef0e0e-e177-4a94-b06f-ce3c1355e5cd";
char subkey[] = "sub-c-3c8b80da-de67-11e5-abb9-0619f8945a4f";
char channel[] = "tester";

aJsonObject *createMessage()
{
  aJsonObject *msg = aJson.createObject();

  aJsonObject *sender = aJson.createObject();
  aJson.addStringToObject(sender, "name", "Arduino--Mario");
  aJson.addItemToObject(msg, "sender", sender);
  return msg;
}

/* Process message like: { "pwm": { "8": 0, "9": 128 } } */
void processActuatorInfo(aJsonObject *item)
{
  aJsonObject *actuators = aJson.getObjectItem(item, "actuators");
  if (!actuators) {
    Serial.println("no pwm data");
    return;
  }

  const static int pins[] = { 30, 31, 32, 33, 34, 35 };
  const static int pins_n = 6;
  for (int i = 0; i &lt; pins_n; i++) {
    char pinstr[3];
    snprintf(pinstr, sizeof(pinstr), "%d", pins[i]);

    aJsonObject *actuatorsVal = aJson.getObjectItem(actuators, pinstr);
    if (!actuatorsVal) continue; /* Value not provided, ok. */
    if (actuatorsVal-&gt;type != aJson_Int) {
      Serial.print(" invalid data type ");
      Serial.print(actuatorsVal-&gt;type, DEC);
      Serial.print(" for pin ");
      Serial.println(pins[i], DEC);
      continue;
    }

    Serial.print(" setting pin ");
    Serial.print(pins[i], DEC);
    Serial.print(" to value ");
    Serial.println(actuatorsVal-&gt;valueint, DEC);
    analogWrite(pins[i], actuatorsVal-&gt;valueint);
  }
}

void dumpMessage(Stream &s, aJsonObject *msg)
{
  int msg_count = aJson.getArraySize(msg);
  for (int i = 0; i &lt; msg_count; i++) {
    aJsonObject *item, *sender, *analog, *value;
    //s.print("Msg #");
    //s.println(i, DEC);

    item = aJson.getArrayItem(msg, i);
    if (!item) { s.println("item not acquired"); delay(1000); return; }

    processActuatorInfo(item);

    /* Below, we parse and dump messages from fellow Arduinos. */

    sender = aJson.getObjectItem(item, "sender");
    if (!sender) { s.println("sender not acquired"); delay(1000); return; }

    s.print(" A2: ");
    analog = aJson.getObjectItem(item, "analog");
    if (!analog) { s.println("analog not acquired"); delay(1000); return; }
    value = aJson.getArrayItem(analog, 2);
    if (!value) { s.println("analog[2] not acquired"); delay(1000); return; }
    s.print(value-&gt;valueint, DEC);

    s.println();
  }
}

/***********************************************************************************
 ***********************************************************************************
 * Actuator Pin Set-Up
 ***********************************************************************************
 **********************************************************************************/

int light1 = 30;
int light2 = 31;
int waterTrigger = 32;
int nutrientDoser = 33;
int phUP = 34;
int phDOWN = 35;

/***********************************************************************************
 ***********************************************************************************
 * End Pin Set-Up
 ***********************************************************************************
 **********************************************************************************/



/***********************************************************************************
 ***********************************************************************************
 * Lux Sensor Set-Up
 ***********************************************************************************
 **********************************************************************************/
#include &lt;Wire.h&gt;
#include &lt;Adafruit_Sensor.h&gt;
#include &lt;Adafruit_TSL2561_U.h&gt;
Adafruit_TSL2561_Unified tsl = Adafruit_TSL2561_Unified(TSL2561_ADDR_FLOAT, 12345);

/*************************************************************************
    Configures the gain and integration time for the TSL2561
*************************************************************************/
void configureSensor(void)
{
  /* You can also manually set the gain or enable auto-gain support */
  tsl.enableAutoRange(true);            /* Auto-gain ... switches automatically between 1x and 16x */

  /* Changing the integration time gives you better sensor resolution (402ms = 16-bit data) */
  tsl.setIntegrationTime(TSL2561_INTEGRATIONTIME_13MS);      /* fast but low resolution */
  // tsl.setIntegrationTime(TSL2561_INTEGRATIONTIME_101MS);  /* medium resolution and speed   */
  // tsl.setIntegrationTime(TSL2561_INTEGRATIONTIME_402MS);  /* 16-bit data but slowest conversions */

  /* Update these values depending on what you've set above!
  Serial.println("------------------------------------");
  Serial.print  ("Gain:         "); Serial.println("Auto");
  Serial.print  ("Timing:       "); Serial.println("13 ms");
  Serial.println("------------------------------------");
  */
}

/***********************************************************************************
 ***********************************************************************************
 * End Lux Sensor Set-Up
 ***********************************************************************************
 **********************************************************************************/


/***********************************************************************************
 ***********************************************************************************
 * Tentacle Set-Up
 ***********************************************************************************
 **********************************************************************************/

#include &lt;SoftwareSerial.h&gt;              //Include the software serial library
#include &lt;Wire.h&gt;                   //enable I2C.

SoftwareSerial sSerial(11, 10);          // RX, TX  - Name the software serial library sSerial (this cannot be omitted)
                                         // assigned to pins 10 and 11 for maximum compatibility

const int s0 = 7;                        //Arduino pin 7 to control pin S0
const int s1 = 6;                        //Arduino pin 6 to control pin S1
const int enable_1 = 5;                //Arduino pin 5 to control pin E on shield 1
const int enable_2 = 4;                  //Arduino pin 4 to control pin E on shield 2

char sensordata[30];                     //A 30 byte character array to hold incoming data from the sensors
byte computer_bytes_received = 0;        //We need to know how many characters bytes have been received
byte sensor_bytes_received = 0;          //We need to know how many characters bytes have been received
int tenticleChannel;                             //INT pointer for channel switching - 0-7 serial, 8-127 I2C addresses
char *cmd;                               //Char pointer used in string parsing
int retries;                             // com-check functions store number of retries here
boolean answerReceived;                  // com-functions store here if a connection-attempt was successful
byte error;                              // error-byte to store result of Wire.transmissionEnd()

String stamp_type;                       // hold the name / type of the stamp
char stamp_version[4];                   // hold the version of the stamp

char computerdata[20];             //we make a 20 byte character array to hold incoming data from a pc/mac/other.

byte i2c_response_code = 0;              //used to hold the I2C response code.
byte in_char = 0;                    //used as a 1 byte buffer to store in bound bytes from an I2C stamp.

/***********************************************************************************
 ***********************************************************************************
 * Tentacle Sensor Set-Up
 ***********************************************************************************
 **********************************************************************************/


void setup() {
  // put your setup code here, to run once:
  Serial.begin(9600);
  Serial.println("Serial set up");

  pinMode(s1, OUTPUT);                   //Set the digital pin as output.
  pinMode(s0, OUTPUT);                   //Set the digital pin as output.
  pinMode(enable_1, OUTPUT);             //Set the digital pin as output.
  pinMode(enable_2, OUTPUT);             //Set the digital pin as output.
  sSerial.begin(38400);                  // Set the soft serial port to 38400
  Wire.begin();                          // enable I2C port.


  while (!Ethernet.begin(mac)) {
    Serial.println("Ethernet setup error");
    delay(1000);
  }
  Serial.println("Ethernet set up");

  PubNub.begin(pubkey, subkey);
  Serial.println("PubNub set up");

   /******** Initialise the Lux Sensor ********/
  if(!tsl.begin())
  {
    /* There was a problem detecting the ADXL345 ... check your connections */
    Serial.print("Ooops, no TSL2561 detected ... Check your wiring or I2C ADDR!");
    while(1);
  }

  configureSensor();
  /******** End Lux initialization ********/

  /******** Temp-Humid Sensor ********/
  dht.begin();
  /******** End Temp-Humid init ********/
  pinMode(light1, OUTPUT);
  pinMode(light2, OUTPUT);
  pinMode(waterTrigger, OUTPUT);
  pinMode(nutrientDoser, OUTPUT);
  pinMode(phUP, OUTPUT);
  pinMode(phDOWN, OUTPUT);
  digitalWrite(light1, HIGH);
  digitalWrite(light2, HIGH);
  digitalWrite(waterTrigger, HIGH);
  digitalWrite(nutrientDoser, HIGH);
  digitalWrite(phUP, HIGH);
  digitalWrite(phDOWN, HIGH);
}

/**********************************************************************************
 ***********************************************************************************
 * End Ethernet+PubNub Set-Up
 ***********************************************************************************
 **********************************************************************************/


void loop() {
  int lux = 0;
  /********** Lux Sensor Start **********/
  /* Get a new sensor event */
  sensors_event_t event;
  tsl.getEvent(&event);

  /* Display the results (light is measured in lux) */
  if (event.light)
  {
    lux = event.light;
  }
  else
  {
    /* If event.light = 0 lux the sensor is probably saturated
       and no reliable data could be generated! */
    Serial.println("Sensor overload");
  }
  /********** End Lux Sensor **********/


  /********** Start Temp-Humid Sensor **********/
  int h = dht.readHumidity();
  int f = dht.readTemperature(true);

  //Validate Temp-Humid Readings
  if (isnan(h) || isnan(f)) {
    Serial.println("Failed to read from DHT sensor!");
    return;
  }
  /********** End Temp-Humid Sensor **********/

  float waterTemp = getWaterTemp();
  waterTemp = (waterTemp*1.8)+32.0;

  Ethernet.maintain();

  EthernetClient *client;

  /* Publish */

  Serial.print("publishing a message: ");
  aJsonObject *msg = createMessage();

 /*Add to message aJsonObject */
  aJsonObject *luxData = aJson.createItem(lux);
  aJson.addItemToObject(msg, "lux", luxData);
  aJsonObject *humidityData = aJson.createItem(h);
  aJson.addItemToObject(msg, "humidity", humidityData);
  aJsonObject *tempData = aJson.createItem(f);
  aJson.addItemToObject(msg, "airTemp", tempData);
  aJsonObject *watertempData = aJson.createItem(waterTemp);
  aJson.addItemToObject(msg, "waterTemp", watertempData);

  tenticleChannel = 99;
  cmd = "r";
  I2C_call();  // send i2c command and wait for answer
  if (sensor_bytes_received &gt; 0) {
    Serial.print("Current pH: ");
    Serial.println(sensordata);       //print the data.
    aJsonObject *phData = aJson.createItem(sensordata);
    aJson.addItemToObject(msg, "pH", phData);
  }

  tenticleChannel = 100;
  cmd = "r";
  I2C_call();  // send i2c command and wait for answer
  if (sensor_bytes_received &gt; 0) {
    Serial.print("Current pH: ");
    Serial.println(sensordata);       //print the data.
    aJsonObject *ecData = aJson.createItem(sensordata);
    aJson.addItemToObject(msg, "EC", ecData);
  }



  char *msgStr = aJson.print(msg);
  aJson.deleteItem(msg);

  // msgStr is returned in a buffer that can be potentially
  // needlessly large; this call will "tighten" it
  msgStr = (char *) realloc(msgStr, strlen(msgStr) + 1);

  Serial.println(msgStr);
  client = PubNub.publish(channel, msgStr);
  free(msgStr);
  if (!client) {
    Serial.println("publishing error");
    delay(1000);
    return;
  }
  client-&gt;stop();

  /* Subscribe and load reply */

  Serial.println("waiting for a message (subscribe)");
  client = PubNub.subscribe(channel);
  if (!client) {
    Serial.println("subscription error");
    delay(1000);
    return;
  }

  /* Parse */

  aJsonClientStream stream(client);
  msg = aJson.parse(&stream);
  client-&gt;stop();
  if (!msg) { Serial.println("parse error"); delay(1000); return; }
  dumpMessage(Serial, msg);
  aJson.deleteItem(msg);

}


/*tentacle shield stuffems*/

byte I2C_call() {           //function to parse and call I2C commands.
  sensor_bytes_received = 0;                            // reset data counter
  memset(sensordata, 0, sizeof(sensordata));            // clear sensordata array;

  Wire.beginTransmission(tenticleChannel);                  //call the circuit by its ID number.
  Wire.write(cmd);                      //transmit the command that was sent through the serial port.
  Wire.endTransmission();                           //end the I2C data transmission.

  i2c_response_code = 254;
  while (i2c_response_code == 254) {      // in case the cammand takes longer to process, we keep looping here until we get a success or an error

    if (String(cmd).startsWith(F("cal")) || String(cmd).startsWith(F("Cal")) ) {
      delay(1400);                        // cal-commands take 1300ms or more
    } else if (String(cmd) == F("r") || String(cmd) == F("R")) {
      delay(1000);                        // reading command takes about a second
    }
    else {
      delay(300);                         // all other commands: wait 300ms
    }

    Wire.requestFrom(tenticleChannel, 48, 1);     //call the circuit and request 48 bytes (this is more then we need).
    i2c_response_code = Wire.read();      //the first byte is the response code, we read this separately.

    while (Wire.available()) {            //are there bytes to receive.
      in_char = Wire.read();              //receive a byte.

      if (in_char == 0) {                 //if we see that we have been sent a null command.
        Wire.endTransmission();           //end the I2C data transmission.
        break;                            //exit the while loop.
      }
      else {
        sensordata[sensor_bytes_received] = in_char;        //load this byte into our array.
        sensor_bytes_received++;
      }
    }

    switch (i2c_response_code) {         //switch case based on what the response code is.
      case 1:                          //decimal 1.
        Serial.println( F("&lt; success"));     //means the command was successful.
        break;                           //exits the switch case.

      case 2:                          //decimal 2.
        Serial.println( F("&lt; command failed"));     //means the command has failed.
        break;                           //exits the switch case.

      case 254:                        //decimal 254.
        Serial.println( F("&lt; command pending"));    //means the command has not yet been finished calculating.
        break;                           //exits the switch case.

      case 255:                        //decimal 255.
        Serial.println( F("No Data"));    //means there is no further data to send.
        break;                           //exits the switch case.
    }
  }
}

boolean check_i2c_connection() {                      // check selected i2c channel/address. verify that it's working by requesting info about the stamp

  retries = 0;

  while (retries &lt; 3) {
    retries++;
    Wire.beginTransmission(tenticleChannel);      // just do a short connection attempt without command to scan i2c for devices
    error = Wire.endTransmission();

    if (error == 0)                       // if error is 0, there's a device
    {

      int r_retries = 0;
      while (r_retries &lt; 3) {
        cmd = "i";                          // set cmd to request info (in I2C_call())
        I2C_call();

        if (parseInfo()) {
          return true;
        }
      }
      return false;
    }
    else
    {
      return false;                      // no device at this address
    }
  }

}



boolean parseInfo() {                  // parses the answer to a "i" command. returns true if answer was parseable, false if not.

  // example:
  // PH EZO  -&gt; '?I,pH,1.1'
  // ORP EZO -&gt; '?I,OR,1.0'   (-&gt; wrong in documentation 'OR' instead of 'ORP')
  // DO EZO  -&gt; '?I,D.O.,1.0' || '?I,DO,1.7' (-&gt; exists in D.O. and DO form)
  // EC EZO  -&gt; '?I,EC,1.0 '

  // Legazy PH  -&gt; 'P,V5.0,5/13'
  // Legazy ORP -&gt; 'O,V4.4,2/13'
  // Legazy DO  -&gt; 'D,V5.0,1/13'
  // Legazy EC  -&gt; 'E,V3.1,5/13'

  if (sensordata[0] == '?' && sensordata[1] == 'I') {          // seems to be an EZO stamp

    // PH EZO
    if (sensordata[3] == 'p' && sensordata[4] == 'H') {
      stamp_type = F("pH EZO");
      stamp_version[0] = sensordata[6];
      stamp_version[1] = sensordata[7];
      stamp_version[2] = sensordata[8];
      stamp_version[3] = 0;

      return true;

      // ORP EZO
    }
    else if (sensordata[3] == 'O' && sensordata[4] == 'R') {
      stamp_type = F("ORP EZO");
      stamp_version[0] = sensordata[6];
      stamp_version[1] = sensordata[7];
      stamp_version[2] = sensordata[8];
      stamp_version[3] = 0;
      return true;

      // DO EZO
    }
    else if (sensordata[3] == 'D' && sensordata[4] == 'O') {
      stamp_type = F("D.O. EZO");
      stamp_version[0] = sensordata[6];
      stamp_version[1] = sensordata[7];
      stamp_version[2] = sensordata[8];
      stamp_version[3] = 0;
      return true;

      // D.O. EZO
    }
    else if (sensordata[3] == 'D' && sensordata[4] == '.' && sensordata[5] == 'O' && sensordata[6] == '.') {
      stamp_type = F("D.O. EZO");
      stamp_version[0] = sensordata[8];
      stamp_version[1] = sensordata[9];
      stamp_version[2] = sensordata[10];
      stamp_version[3] = 0;
      return true;

      // EC EZO
    }
    else if (sensordata[3] == 'E' && sensordata[4] == 'C') {
      stamp_type = F("EC EZO");
      stamp_version[0] = sensordata[6];
      stamp_version[1] = sensordata[7];
      stamp_version[2] = sensordata[8];
      stamp_version[3] = 0;
      return true;

      // unknown EZO stamp
    }
    else {
      stamp_type = F("unknown EZO stamp");
      return true;
    }

  }

  // it's a legacy stamp (non-EZO)
  else
  {
    // Legacy pH
    if ( sensordata[0] == 'P') {
      stamp_type = F("pH (legacy)");
      stamp_version[0] = sensordata[3];
      stamp_version[1] = sensordata[4];
      stamp_version[2] = sensordata[5];
      stamp_version[3] = 0;
      return true;

      // legacy ORP
    }
    else if ( sensordata[0] == 'O') {
      stamp_type = F("ORP (legacy)");
      stamp_version[0] = sensordata[3];
      stamp_version[1] = sensordata[4];
      stamp_version[2] = sensordata[5];
      stamp_version[3] = 0;
      return true;

      // Legacy D.O.
    }
    else if ( sensordata[0] == 'D') {
      stamp_type = F("D.O. (legacy)");
      stamp_version[0] = sensordata[3];
      stamp_version[1] = sensordata[4];
      stamp_version[2] = sensordata[5];
      stamp_version[3] = 0;
      return true;

      // Lecagy EC
    }
    else if ( sensordata[0] == 'E') {
      stamp_type = F("EC (legacy)");
      stamp_version[0] = sensordata[3];
      stamp_version[1] = sensordata[4];
      stamp_version[2] = sensordata[5];
      stamp_version[3] = 0;
      return true;
    }
  }

  /*
  Serial.println("can not parse data: ");
   Serial.print("'");
   Serial.print(sensordata);
   Serial.println("'");
   */
  return false;        // can not parse this info-string
}



void clearIncomingBuffer() {          // "clears" the incoming soft-serial buffer
  while (sSerial.available() ) {
    //Serial.print((char)sSerial.read());
    sSerial.read();
  }
}

/*end of tenticle stuffems*/


/*Start of waterTemp stuffems*/
float getWaterTemp(){
  //returns the temperature from one DS18S20 in DEG Celsius

  byte data[12];
  byte addr[8];

  if ( !ds.search(addr)) {
      //no more sensors on chain, reset search
      ds.reset_search();
      return -1000;
  }

  if ( OneWire::crc8( addr, 7) != addr[7]) {
      Serial.println("CRC is not valid!");
      return -1000;
  }

  if ( addr[0] != 0x10 && addr[0] != 0x28) {
      Serial.print("Device is not recognized");
      return -1000;
  }

  ds.reset();
  ds.select(addr);
  ds.write(0x44,1); // start conversion, with parasite power on at the end

  byte present = ds.reset();
  ds.select(addr);
  ds.write(0xBE); // Read Scratchpad


  for (int i = 0; i &lt; 9; i++) { // we need 9 bytes
    data[i] = ds.read();
  }

  ds.reset_search();

  byte MSB = data[1];
  byte LSB = data[0];

  float tempRead = ((MSB &lt;&lt; 8) | LSB); //using two's compliment
  float TemperatureSum = tempRead / 16;

  return TemperatureSum;

}</pre>
                            </div>
                            <!-- end widget content -->

                        </div>
                        <!-- end widget div -->

                    </div>
                </div>
            </div>


        </div>

    </div>
</div>
<!-- End Add Device Button -->

<!-- PAGE FOOTER -->
<div class="page-footer">
    <div class="row">
        <div class="col-xs-12 col-sm-12 text-right hidden-xs">
            <div class="txt-color-white inline-block">
                <i class="txt-color-blueLight hidden-mobile">You Look Great Today </i>
                <div class="btn-group dropup">
                    <button class="btn btn-xs dropdown-toggle bg-color-blue txt-color-white" data-toggle="dropdown">
                        <i class="fa fa-link"></i> <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu pull-right text-left">
                        <li>
                            <div class="padding-5">
                                <p class="txt-color-darken font-sm no-margin">Download Progress</p>
                                <div class="progress progress-micro no-margin">
                                    <div class="progress-bar progress-bar-success" style="width: 50%;"></div>
                                </div>
                            </div>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <div class="padding-5">
                                <p class="txt-color-darken font-sm no-margin">Server Load</p>
                                <div class="progress progress-micro no-margin">
                                    <div class="progress-bar progress-bar-success" style="width: 20%;"></div>
                                </div>
                            </div>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <div class="padding-5">
                                <p class="txt-color-darken font-sm no-margin">Memory Load <span class="text-danger">*critical*</span></p>
                                <div class="progress progress-micro no-margin">
                                    <div class="progress-bar progress-bar-danger" style="width: 70%;"></div>
                                </div>
                            </div>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <div class="padding-5">
                                <button class="btn btn-block btn-default">refresh</button>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- END PAGE FOOTER -->

<!-- SHORTCUT AREA : With large tiles (activated via clicking user name tag)
Note: These tiles are completely responsive,
you can add as many as you like
-->
<div id="shortcut">
    <ul>
        <li>
            <a href="inbox.html" class="jarvismetro-tile big-cubes bg-color-blue"> <span class="iconbox"> <i class="fa fa-envelope fa-4x"></i> <span>Mail <span class="label pull-right bg-color-darken">14</span></span> </span> </a>
        </li>
        <li>
            <a href="calendar.html" class="jarvismetro-tile big-cubes bg-color-orangeDark"> <span class="iconbox"> <i class="fa fa-calendar fa-4x"></i> <span>Calendar</span> </span> </a>
        </li>
        <li>
            <a href="gmap-xml.html" class="jarvismetro-tile big-cubes bg-color-purple"> <span class="iconbox"> <i class="fa fa-map-marker fa-4x"></i> <span>Maps</span> </span> </a>
        </li>
        <li>
            <a href="invoice.html" class="jarvismetro-tile big-cubes bg-color-blueDark"> <span class="iconbox"> <i class="fa fa-book fa-4x"></i> <span>Invoice <span class="label pull-right bg-color-darken">99</span></span> </span> </a>
        </li>
        <li>
            <a href="gallery.html" class="jarvismetro-tile big-cubes bg-color-greenLight"> <span class="iconbox"> <i class="fa fa-picture-o fa-4x"></i> <span>Gallery </span> </span> </a>
        </li>
        <li>
            <a href="profile.html" class="jarvismetro-tile big-cubes selected bg-color-pinkDark"> <span class="iconbox"> <i class="fa fa-user fa-4x"></i> <span>My Profile </span> </span> </a>
        </li>
    </ul>
</div>
<!-- END SHORTCUT AREA -->

<!--================================================== -->

<!-- PACE LOADER - turn this on if you want ajax loading to show (caution: uses lots of memory on iDevices)-->
<script data-pace-options='{ "restartOnRequestAfter": true }' src="js/plugin/pace/pace.min.js"></script>

<!-- Link to Google CDN's jQuery + jQueryUI; fall back to local -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script>
    if (!window.jQuery) {
        document.write('<script src="js/libs/jquery-2.1.1.min.js"><\/script>');
    }
</script>

<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>
<script>
    if (!window.jQuery.ui) {
        document.write('<script src="js/libs/jquery-ui-1.10.3.min.js"><\/script>');
    }
</script>

<!-- IMPORTANT: APP CONFIG -->
<script src="js/app.config.js"></script>

<!-- JS TOUCH : include this plugin for mobile drag / drop touch events-->
<script src="js/plugin/jquery-touch/jquery.ui.touch-punch.min.js"></script>

<!-- BOOTSTRAP JS -->
<script src="js/bootstrap/bootstrap.min.js"></script>

<!-- CUSTOM NOTIFICATION -->
<script src="js/notification/SmartNotification.min.js"></script>

<!-- JARVIS WIDGETS -->
<script src="js/smartwidgets/jarvis.widget.min.js"></script>

<!-- EASY PIE CHARTS -->
<script src="js/plugin/easy-pie-chart/jquery.easy-pie-chart.min.js"></script>

<!-- SPARKLINES -->
<script src="js/plugin/sparkline/jquery.sparkline.min.js"></script>

<!-- JQUERY VALIDATE -->
<script src="js/plugin/jquery-validate/jquery.validate.min.js"></script>

<!-- JQUERY MASKED INPUT -->
<script src="js/plugin/masked-input/jquery.maskedinput.min.js"></script>

<!-- JQUERY SELECT2 INPUT -->
<script src="js/plugin/select2/select2.min.js"></script>

<!-- JQUERY UI + Bootstrap Slider -->
<script src="js/plugin/bootstrap-slider/bootstrap-slider.min.js"></script>

<!-- browser msie issue fix -->
<script src="js/plugin/msie-fix/jquery.mb.browser.min.js"></script>

<!-- FastClick: For mobile devices -->
<script src="js/plugin/fastclick/fastclick.min.js"></script>

<!--[if IE 8]>

<h1>Your browser is out of date, please update your browser by going to www.microsoft.com/download</h1>

<![endif]-->

<!-- Demo purpose only -->
<!--<script src="js/demo.min.js"></script>-->

<!-- MAIN APP JS FILE -->
<script src="js/app.min.js"></script>






<script>
    $(document).ready(function() {

        // DO NOT REMOVE : GLOBAL FUNCTIONS!
        pageSetUp();

        /*
         * PAGE RELATED SCRIPTS
         */

        $(".js-status-update a").click(function() {
            var selText = $(this).text();
            var $this = $(this);
            $this.parents('.btn-group').find('.dropdown-toggle').html(selText + ' <span class="caret"></span>');
            $this.parents('.dropdown-menu').find('li').removeClass('active');
            $this.parent().addClass('active');
        });

        /*Graphing*/
        /*Graph Sizing*/
        var page_height = $(window).height();
        var graph_state = 0;
        $('#pH_chartDiv').css("height", page_height/1.8+"px");
        $('#ec_overview_chartdiv').css("height", page_height/1.8+"px");
        $('#ec_chartDiv').css("height", page_height/1.8+"px");
        $('#tds_chartDiv').css("height", page_height/1.8+"px");
        $('#ps_chartDiv').css("height", page_height/1.8+"px");
        $('#lux_chartDiv').css("height", page_height/1.8+"px");
        $('#temp_overview_chartDiv').css("height", page_height/1.8+"px");
        $('#airTemp_chartDiv').css("height", page_height/1.8+"px");
        $('#waterTemp_chartDiv').css("height", page_height/1.8+"px");
        $('#humidity_chartDiv').css("height", page_height/1.8+"px");

        $('a[class="button-icon jarviswidget-fullscreen-btn"]').click(function () {
            if (graph_state == 0){
                $('#pH_chartDiv').css("height", (page_height - 128) + "px");
                $('#ec_overview_chartdiv').css("height", (page_height - 128) + "px");
                $('#ec_chartDiv').css("height", (page_height - 128) + "px");
                $('#tds_chartDiv').css("height", page_height + "px");
                $('#ps_chartDiv').css("height", page_height + "px");
                $('#lux_chartDiv').css("height", page_height + "px");
                $('#temp_overview_chartDiv').css("height", page_height + "px");
                $('#airTemp_chartDiv').css("height", page_height + "px");
                $('#waterTemp_chartDiv').css("height", page_height + "px");
                $('#humidity_chartDiv').css("height", page_height + "px");
                $('.amChartsLegend').css("display", "block");
                graph_state = 1;
            } else if (graph_state == 1) {
                $('#pH_chartDiv').css("height", page_height/1.8+"px");
                $('#ec_overview_chartdiv').css("height", page_height/1.8+"px");
                $('#ec_chartDiv').css("height", page_height/1.8+"px");
                $('#tds_chartDiv').css("height", page_height/1.8+"px");
                $('#ps_chartDiv').css("height", page_height/1.8+"px");
                $('#lux_chartDiv').css("height", page_height/1.8+"px");
                $('#temp_overview_chartDiv').css("height", page_height/1.8+"px");
                $('#airTemp_chartDiv').css("height", page_height/1.8+"px");
                $('#waterTemp_chartDiv').css("height", page_height/1.8+"px");
                $('#humidity_chartDiv').css("height", page_height/1.8+"px");
                $('.amChartsLegend').css("display", "none");
                graph_state = 0;
            }
        });
    });

</script>

<!-- Your GOOGLE ANALYTICS CODE Below -->
<script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-XXXXXXXX-X']);
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script');
        ga.type = 'text/javascript';
        ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(ga, s);
    })();

</script>

</body>

</html>